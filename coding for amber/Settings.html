<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings</title>
  <link rel="stylesheet" href="Settings.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #f4e6d7;
      min-height: 100vh;
      margin: 0;
    }

    /* Header */
    .header {
      background-color: #232323;
      height: 64px;
      display: grid;
      grid-template-columns: 220px 1fr auto;
      align-items: center;
      gap: 16px;
      padding: 0 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .logo {
      color: white;
      font-size: 28px;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-dot {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background-color: #f08a24;
    }

    .search-container {
      display: grid;
      grid-template-columns: 1fr 44px;
      gap: 0;
      align-items: center;
      background: white;
      border-radius: 24px;
      padding: 4px;
      max-width: 680px;
      width: 100%;
      margin: 0 auto;
    }

    .search-button {
      background-color: #f08a24;
      border: none;
      border-radius: 8px;
      height: 36px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .search-button svg {
      width: 16px;
      height: 16px;
      color: white;
    }


    .search-input {
      border: none;
      outline: none;
      padding: 10px 12px;
      font-size: 14px;
      border-radius: 8px;
    }

    .search-input::placeholder {
      color: #999;
    }

    .header-right {
      display: flex;
      gap: 16px;
    }

    .header-item {
      display: flex;
      align-items: center;
      gap: 8px;
      color: white;
      text-decoration: none;
      font-weight: 500;
    }

    .header-item .label {
      font-size: 12px;
      opacity: 0.9;
    }

    .header-icon {
      width: 24px;
      height: 24px;
    }

    .main-container {
      display: flex;
      min-height: calc(100vh - 64px);
    }

    /* Sidebar */
    .sidebar {
      width: 260px;
      background: #b8735f;
      padding: 16px 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      position: sticky;
      top: 0;
      height: 100vh;
      overflow-y: auto;
    }

    .nav-menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .nav-item {
      margin-bottom: 0;
    }

    .nav-link {
      display: flex;
      align-items: center;
      gap: 10px;
      color: white;
      text-decoration: none;
      padding: 10px 12px;
      border-radius: 10px;
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 0;
      transition: all 0.3s ease;
    }

    .nav-link:hover {
      background: rgba(255, 255, 255, 0.12);
    }

    .nav-link.active {
      background: rgba(255, 255, 255, 0.12);
      color: white;
    }

    .nav-icon {
      width: 20px;
      height: 20px;
      margin-right: 0;
    }

    .nav-link.logout {
      color: #ffcccb;
    }

    .nav-link.logout:hover {
      background: rgba(255, 204, 203, 0.1);
    }

    /* Promotional Cards */
    .promo-cards {
      margin-top: 14px;
      display: grid;
      gap: 10px;
      padding: 0;
    }

    .promo-card {
      background: #e6b2a4;
      color: #351a12;
      border-radius: 10px;
      padding: 10px 12px;
      margin-bottom: 0;
      box-shadow: none;
    }

    .promo-card h4 {
      margin: 0 0 6px 0;
      font-size: 14px;
      font-weight: 600;
    }

    .promo-card p {
      margin: 0 0 8px 0;
      font-size: 12px;
      opacity: 1;
    }

    .promo-btn {
      border: 0;
      border-radius: 14px;
      padding: 4px 10px;
      background: #fff;
      font-weight: 700;
      cursor: pointer;
      font-size: 12px;
      color: #351a12;
    }

    .promo-btn:hover {
      background: #f0f0f0;
    }

    /* Main Content */
    .main-content {
      background-color: #f4e6d7;
      flex: 1;
      padding: 40px;
      position: relative;
    }

    .content-wrapper {
      display: flex;
      gap: 30px;
    }

    .page-header {
      margin-bottom: 20px;
      text-align: left;
    }

    .page-title {
      font-size: 32px;
      font-weight: 800;
      color: #8B4513;
      margin-bottom: 6px;
    }

    .page-subtitle {
      font-size: 17px;
      color: #8B4513;
      font-weight: 400;
      line-height: 1.5;
    }

    /* Left Panel - User Profile */
    .left-panel {
      background: white;
      border-radius: 12px;
      padding: 20px;
      width: 250px;
      height: fit-content;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 5;
    }

    .profile-section {
      text-align: center;
      margin-bottom: 20px;
    }

    .profile-avatar {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      margin: 0 auto 15px;
      background: #00FF00;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 28px;
      font-weight: 700;
      box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
      position: relative;
    }

    .profile-avatar::after {
      content: "+";
      position: absolute;
      bottom: 5px;
      right: 5px;
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #3B82F6, #1D4ED8);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      color: white;
      border: 2px solid white;
    }

    .profile-name {
      font-size: 18px;
      font-weight: 600;
      color: #2D3748;
      margin-bottom: 5px;
    }

    .profile-email {
      font-size: 14px;
      color: #718096;
      font-weight: 400;
      margin-bottom: 15px;
    }

    .left-nav-menu {
      list-style: none;
    }

    .left-nav-item {
      margin-bottom: 6px;
    }

    .left-nav-link {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      text-decoration: none;
      color: #2D3748;
      border-radius: 8px;
      transition: all 0.3s ease;
      font-weight: 500;
      font-size: 14px;
    }

    .left-nav-link:hover {
      background: #f7fafc;
    }

    .left-nav-link.active {
      background: linear-gradient(135deg, #8b5cf6, #a855f7);
      color: white;
    }

    .left-nav-icon {
      width: 18px;
      height: 18px;
      margin-right: 12px;
      color: #2D3748;
    }

    .left-nav-link.active .left-nav-icon {
      color: white;
    }

    .left-nav-link:last-child .left-nav-icon {
      color: #2D3748;
    }

    /* Right Panel - Settings */
    .right-panel {
      background: white;
      border-radius: 8px;
      padding: 30px;
      flex: 1;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 5;
    }

    .settings-header {
      margin-bottom: 20px;
    }

    .settings-title {
      font-size: 24px;
      font-weight: 500;
      color: #2D3748;
      margin-bottom: 6px;
    }

    .settings-subtitle {
      font-size: 14px;
      color: #2D3748;
      font-weight: 400;
    }

    .settings-list {
      display: flex;
      flex-direction: column;
      gap: 20px;
      position: relative;
      z-index: 2;
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      transition: all 0.3s ease;
      border: 1px solid rgba(139, 69, 19, 0.1);
    }

    .setting-item:hover {
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.1);
      transform: translateY(-2px);
    }

    .setting-item.notifications {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(139, 69, 19, 0.2);
    }

    .setting-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .setting-icon {
      width: 24px;
      height: 24px;
      color: #2D3748;
      transition: all 0.3s ease;
    }

    .setting-item:hover .setting-icon {
      color: #ff8c42;
      transform: scale(1.1);
    }

    .setting-label {
      font-size: 14px;
      font-weight: 500;
      color: #2D3748;
    }

    .setting-control {
      display: flex;
      align-items: center;
      gap: 18px;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, #e5e7eb, #d1d5db);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 30px;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 24px;
      width: 24px;
      left: 3px;
      bottom: 3px;
      background: linear-gradient(135deg, #ffffff, #f9fafb);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    input:checked + .slider {
      background: linear-gradient(135deg, #10b981, #059669);
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    input:checked + .slider:before {
      transform: translateX(30px);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    /* Left Panel - User Profile */
    .left-panel {
      background: white;
      border-radius: 12px;
      padding: 20px;
      width: 250px;
      height: fit-content;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 5;
    }

    .profile-section {
      text-align: center;
      margin-bottom: 20px;
    }

    .profile-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      margin: 0 auto 20px;
      background: linear-gradient(135deg, #ff6b35, #ff8c42);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 40px;
      font-weight: 500;
      box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
      position: relative;
    }

    .profile-avatar::after {
      content: "+";
      position: absolute;
      bottom: 5px;
      right: 5px;
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #3B82F6, #1D4ED8);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      color: white;
      border: 2px solid white;
    }

    .profile-name {
      font-size: 24px;
      font-weight: 500;
      color: #8B4513;
      margin-bottom: 6px;
    }

    .profile-email {
      font-size: 14px;
      color: #8B4513;
      font-weight: 400;
    }

    .left-nav-menu {
      list-style: none;
    }

    .left-nav-item {
      margin-bottom: 6px;
    }

    .left-nav-link {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      text-decoration: none;
      color: #8B4513;
      border-radius: 8px;
      transition: all 0.3s ease;
      font-weight: 500;
      font-size: 14px;
    }

    .left-nav-link:hover {
      background-color: rgba(255, 107, 53, 0.1);
    }

    .left-nav-link.active {
      background: linear-gradient(135deg, #8B5CF6, #3B82F6);
      color: white;
    }

    .left-nav-icon {
      width: 18px;
      height: 18px;
      margin-right: 12px;
      color: #8B4513;
    }

    .left-nav-link.active .left-nav-icon {
      color: white;
    }

    .left-nav-link:last-child .left-nav-icon {
      color: #2D3748;
    }

    /* Right Panel - Settings */
    .right-panel {
      background: white;
      border-radius: 8px;
      padding: 0;
      flex: 1;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 5;
      overflow: hidden;
      border: 1px solid rgba(240, 138, 36, 0.1);
    }

    .settings-header {
      background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
      color: white;
      padding: 40px 40px 30px 40px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .settings-header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }

    .settings-title {
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 12px;
      position: relative;
      z-index: 2;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      color: white !important;
    }

    .settings-subtitle {
      font-size: 18px;
      font-weight: 400;
      opacity: 0.9;
      position: relative;
      z-index: 2;
      line-height: 1.6;
      color: white !important;
    }

    .settings-content {
      padding: 40px;
      max-height: calc(100vh - 200px);
      overflow-y: auto;
      scroll-behavior: smooth;
    }

    .settings-content::-webkit-scrollbar {
      width: 6px;
    }

    .settings-content::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 3px;
    }

    .settings-content::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #f08a24, #e67e22);
      border-radius: 3px;
    }

    .settings-content::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #e67e22, #d35400);
    }

    .settings-list {
      display: flex;
      flex-direction: column;
      gap: 20px;
      position: relative;
      z-index: 2;
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      transition: all 0.3s ease;
      border: 1px solid rgba(139, 69, 19, 0.1);
    }

    .setting-item:hover {
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.1);
      transform: translateY(-2px);
    }

    .setting-item.notifications {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(139, 69, 19, 0.2);
    }

    .setting-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .setting-icon {
      width: 24px;
      height: 24px;
      color: #8B4513;
      transition: all 0.3s ease;
    }

    .setting-item:hover .setting-icon {
      color: #654321;
      transform: scale(1.1);
    }

    .setting-label {
      font-size: 14px;
      font-weight: 500;
      color: #8B4513;
    }

    .setting-control {
      display: flex;
      align-items: center;
      gap: 18px;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, #e5e7eb, #d1d5db);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 30px;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 24px;
      width: 24px;
      left: 3px;
      bottom: 3px;
      background: linear-gradient(135deg, #ffffff, #f9fafb);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    input:checked + .slider {
      background: linear-gradient(135deg, #10b981, #059669);
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    input:checked + .slider:before {
      transform: translateX(30px);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .toggle-labels {
      display: flex;
      gap: 12px;
      font-size: 13px;
      font-weight: 500;
    }

    .toggle-label {
      padding: 4px 12px;
      border-radius: 8px;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .toggle-label.on {
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
    }

    .toggle-label.off {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
      box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .btn-reset {
      background: #ff8c42;
      color: white;
    }

    .btn-reset:hover {
      background: #e67e22;
      transform: translateY(-2px);
    }

    .btn-manage {
      background: #ff8c42;
      color: white;
    }

    .btn-manage:hover {
      background: #e67e22;
      transform: translateY(-2px);
    }

    .btn-delete {
      background-color: #dc3545;
      color: white;
    }

    .btn-delete:hover {
      background-color: #c82333;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: #8e8e93;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .btn-secondary:hover {
      background: #6d6d70;
    }

    /* Modal Styles */
    .modal {
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #f0f0f0;
    }

    .modal-header h2 {
      margin: 0;
      color: #ff3b30;
      font-size: 20px;
    }

    .close {
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      color: #999;
    }

    .close:hover {
      color: #333;
    }

    .modal-body {
      padding: 20px;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      padding: 20px;
      border-top: 1px solid #f0f0f0;
    }

    .warning-message {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
    }

    .warning-message p {
      margin: 0 0 5px 0;
      color: #856404;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #333;
    }

    .form-group input[type="checkbox"] {
      margin-right: 8px;
    }

    .form-group label:has(input[type="checkbox"]) {
      display: flex;
      align-items: flex-start;
      font-size: 14px;
      line-height: 1.4;
    }

    .error-message {
      color: #ff3b30;
      font-size: 12px;
      margin-top: 5px;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    .form-input.error {
      border-color: #ff3b30;
    }

    /* Payment Method Modal Styles - Match Image Design */
    .payment-modal-content {
      background: white;
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .payment-header {
      display: flex;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #f0f0f0;
      background: white;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .payment-back-btn {
      background: none;
      border: none;
      font-size: 20px;
      color: #333;
      cursor: pointer;
      padding: 8px;
      margin-right: 15px;
    }

    .payment-title {
      font-size: 18px;
      font-weight: 500;
      color: #1a1a1a;
      margin: 0;
    }

    .payment-sections {
      flex: 1;
      overflow-y: auto;
      padding: 0 20px 20px 20px;
    }

    .payment-section {
      margin-bottom: 20px;
    }

    .payment-section-title {
      font-size: 16px;
      font-weight: 600;
      color: #333;
      margin: 20px 0 15px 0;
    }

    /* Payment Methods List - Match Image Design */
    .payment-methods-list {
      /* Keep existing dynamic content */
    }

    /* Add Methods List - Match Image Design */
    .add-methods-list {
      /* Keep existing dynamic content */
    }

    .add-method-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 0;
      border-bottom: 1px solid #f0f0f0;
      cursor: pointer;
    }

    .add-method-info {
      display: flex;
      align-items: center;
      flex: 1;
    }

    .add-method-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      font-size: 12px;
      font-weight: 600;
      color: white;
    }

    .add-method-icon.touchngo {
      background: #00a651;
    }

    .add-method-icon.gx {
      background: #6b46c1;
    }

    .add-method-icon.cards {
      background: #00a651;
    }

    .add-method-icon.bank {
      background: #00a651;
    }

    .add-method-icon.alipay {
      background: #1677ff;
    }

    .add-method-icon.kakao {
      background: #ffcd00;
      color: #3c1e1e;
    }

    .tng-ewallet {
      font-size: 10px;
    }

    .add-method-details {
      flex: 1;
    }

    .add-method-name {
      font-size: 16px;
      font-weight: 600;
      color: #1a1a1a;
      margin: 0;
    }

    .add-method-subtitle {
      font-size: 14px;
      color: #8e8e93;
      margin: 2px 0 0 0;
    }

    .add-method-partner {
      font-size: 12px;
      color: #1677ff;
      margin-right: 10px;
    }

    .add-method-chevron {
      color: #c7c7cc;
      font-size: 16px;
    }

    .btn-update {
      background: linear-gradient(135deg, #8B5CF6, #3B82F6);
      color: white;
      padding: 12px 30px;
      font-size: 14px;
      font-weight: 500;
    }

    .btn-update:hover {
      background: linear-gradient(135deg, #7C3AED, #2563EB);
      transform: translateY(-2px);
    }

    /* Back to top button */
    .back-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: linear-gradient(135deg, #f08a24, #e67e22);
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(240, 138, 36, 0.3);
      transition: all 0.3s ease;
      z-index: 1000;
      display: none;
    }

    .back-to-top:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(240, 138, 36, 0.4);
    }

    .back-to-top.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Payment Details Modal Styles */
    .payment-details-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }

    .payment-details-content {
      background: white;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
    }

    .payment-details-header {
      display: flex;
      align-items: center;
      padding: 20px 20px 0 20px;
      border-bottom: 1px solid #f0f0f0;
      margin-bottom: 20px;
    }

    .payment-back-arrow {
      width: 24px;
      height: 24px;
      margin-right: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #333;
    }

    .payment-back-arrow::before {
      content: '←';
      font-size: 20px;
    }

    .payment-header-title {
      font-size: 18px;
      font-weight: 600;
      color: #000;
    }

    .payment-main-content {
      padding: 0 20px 20px 20px;
    }

    .card-display {
      text-align: center;
      margin-bottom: 20px;
    }

    .card-icon {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #1e3a8a, #3b82f6);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    .card-icon-text {
      color: white;
      font-size: 16px;
      font-weight: bold;
      letter-spacing: 1px;
    }

    .card-name {
      font-size: 18px;
      font-weight: 500;
      color: #000;
      margin-bottom: 4px;
    }

    .card-number {
      font-size: 16px;
      color: #666;
      font-family: 'Courier New', monospace;
    }

    .details-section {
      background-color: #ffffff;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .detail-row:last-child {
      border-bottom: none;
    }

    .detail-label {
      font-size: 16px;
      color: #000;
      font-weight: 400;
    }

    .detail-value {
      font-size: 16px;
      color: #000;
      font-weight: 500;
    }

    .toggle-switch {
      position: relative;
      width: 50px;
      height: 30px;
      background-color: #ccc;
      border-radius: 15px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .toggle-switch.off {
      background-color: #ccc;
    }

    .toggle-switch.on {
      background-color: #4CAF50;
    }

    .toggle-slider {
      position: absolute;
      top: 3px;
      left: 3px;
      width: 24px;
      height: 24px;
      background-color: white;
      border-radius: 50%;
      transition: transform 0.3s;
    }

    .toggle-switch.off .toggle-slider {
      transform: translateX(0);
    }

    .toggle-switch.on .toggle-slider {
      transform: translateX(20px);
    }

    .delete-button {
      background: none;
      border: none;
      color: #ff4444;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      padding: 16px 0;
      width: 100%;
      text-align: left;
    }

    .delete-button:hover {
      color: #cc0000;
    }

    .payment-footer-disclaimer {
      padding: 20px;
      text-align: center;
      border-top: 1px solid #f0f0f0;
      margin-top: 20px;
    }

    .disclaimer-text {
      font-size: 12px;
      color: #666;
      line-height: 1.4;
    }

    .learn-more-link {
      color: #007AFF;
      text-decoration: none;
      font-weight: 500;
    }

    .learn-more-link:hover {
      text-decoration: underline;
    }

    /* Reset Password Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      backdrop-filter: blur(8px);
    }

    #deleteAccountModal {
      background-color: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal {
      background: white;
      border-radius: 8px;
      padding: 40px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      position: relative;
      animation: modalSlideIn 0.3s ease-out;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .modal-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 28px;
      font-weight: 500;
      color: #8B4513;
      margin-bottom: 6px;
    }

    .modal-subtitle {
      font-size: 14px;
      color: #718096;
      line-height: 1.5;
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      font-size: 24px;
      color: #999;
      cursor: pointer;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .modal-close:hover {
      background-color: #f5f5f5;
      color: #333;
    }

    /* Payment Details Modal Styles - Contained Modal */
    .payment-details-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 2000;
      display: none;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .payment-details-modal.show {
      display: flex;
    }

    .payment-details-container {
      background: white;
      border-radius: 12px;
      width: 100%;
      max-width: 400px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .details-header {
      display: flex;
      align-items: center;
      padding: 20px 20px 15px 20px;
      background: white;
      position: sticky;
      top: 0;
      z-index: 10;
      margin-bottom: 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .details-back-btn {
      background: none;
      border: none;
      font-size: 20px;
      color: #000;
      cursor: pointer;
      padding: 8px;
      margin-right: 16px;
    }

    .details-title {
      font-size: 17px;
      font-weight: 600;
      color: #000;
      margin: 0;
    }

    .details-content {
      padding: 0 20px 20px 20px;
    }

    .card-display {
      text-align: center;
      margin-bottom: 20px;
      padding-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .card-logo {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 12px;
      background: #1a1f71;
    }

    .card-logo.visa {
      background: white;
      border: 1px solid #e5e7eb;
    }

    .card-logo.mastercard {
      background: #eb001b;
    }

    .card-logo.amex {
      background: #006fcf;
    }

    .card-logo.touchngo {
      background: #0066cc;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      width: 60px;
      height: 60px;
      padding: 8px;
    }

    .visa-text {
      color: #1a1f71;
      font-weight: 900;
      font-size: 12px;
      letter-spacing: 0.5px;
      font-style: italic;
      font-family: 'Arial', sans-serif;
    }

    .card-info {
      text-align: center;
    }

    .card-type {
      font-size: 16px;
      font-weight: 500;
      color: #000;
      margin-bottom: 2px;
    }

    .card-number {
      font-size: 14px;
      color: #666;
      font-family: 'Courier New', monospace;
    }

    .card-details {
      border-top: 1px solid #f0f0f0;
      padding-top: 20px;
    }

    .detail-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 0;
      border-bottom: 1px solid #f0f0f0;
      min-height: 44px;
    }

    .detail-row:last-child {
      border-bottom: none;
    }

    .detail-label {
      font-size: 14px;
      color: #000;
      font-weight: 400;
    }

    .detail-value {
      font-size: 14px;
      color: #000;
    }

    .delete-row {
      cursor: pointer;
      transition: background-color 0.2s ease;
      display: flex;
      justify-content: flex-end;
    }

    .delete-row:hover {
      background-color: #f8f9fa;
    }

    .delete-text {
      color: #cc0000 !important;
    }

    .details-footer {
      padding: 20px 0;
      text-align: center;
      border-top: 1px solid #f0f0f0;
      margin-top: 20px;
    }

    .footer-text {
      font-size: 11px;
      color: #8e8e93;
      line-height: 1.4;
      margin: 0;
    }

    .learn-more-link {
      color: #007AFF;
      cursor: pointer;
    }

    /* Toggle Switch for Payment Details - Exact Image Match */
    .details-content .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 30px;
    }

    .details-content .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .details-content .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 30px;
    }

    .details-content .toggle-slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    .details-content input:checked + .toggle-slider {
      background-color: #4CAF50;
    }

    .details-content input:checked + .toggle-slider:before {
      transform: translateX(20px);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #8B4513;
      margin-bottom: 6px;
    }

    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s ease;
      background-color: #f9fafb;
    }

    .form-input:focus {
      outline: none;
      border-color: #f08a24;
      background-color: white;
      box-shadow: 0 0 0 3px rgba(240, 138, 36, 0.1);
    }

    .password-input-container {
      position: relative;
      display: flex;
      align-items: center;
    }

    .password-toggle {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      padding: 5px;
      color: #6b7280;
      transition: all 0.3s ease;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
      border-radius: 4px;
    }

    .password-toggle:hover {
      color: #f08a24;
      background-color: rgba(240, 138, 36, 0.1);
    }

    .password-toggle:focus {
      outline: none;
      color: #f08a24;
      background-color: rgba(240, 138, 36, 0.1);
    }

    .password-toggle svg {
      width: 18px;
      height: 18px;
      transition: all 0.3s ease;
    }

    .password-toggle.active svg {
      color: #f08a24;
    }

    .form-input.error {
      border-color: #ef4444;
      background-color: #fef2f2;
    }

    .error-message {
      color: #ef4444;
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    .password-requirements {
      background-color: #f0f9ff;
      border: 1px solid #bae6fd;
      border-radius: 8px;
      padding: 15px;
      margin-top: 10px;
    }

    .password-requirements h4 {
      font-size: 14px;
      font-weight: 500;
      color: #0369a1;
      margin-bottom: 6px;
    }

    .password-requirements ul {
      margin: 0;
      padding-left: 20px;
    }

    .password-requirements li {
      font-size: 13px;
      color: #0369a1;
      margin-bottom: 4px;
    }

    .password-requirements li.valid {
      color: #059669;
    }

    .password-requirements li.invalid {
      color: #dc2626;
    }

    .modal-actions {
      display: flex;
      gap: 15px;
      margin-top: 30px;
    }

    .btn-modal {
      flex: 1;
      padding: 15px 25px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .btn-modal-primary {
      background: linear-gradient(135deg, #f08a24, #e67e22);
      color: white;
    }

    .btn-modal-primary:hover {
      background: linear-gradient(135deg, #e67e22, #d35400);
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(240, 138, 36, 0.3);
    }

    .btn-modal-secondary {
      background: #f3f4f6;
      color: #6b7280;
      border: 2px solid #e5e7eb;
    }

    .btn-modal-secondary:hover {
      background: #e5e7eb;
      color: #374151;
    }

    .btn-modal:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none !important;
    }

    /* Modern Delete Account Modal */
    #deleteAccountModal {
      z-index: 1001;
    }

    #deleteAccountModal .modal {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 40px;
      max-width: 520px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 
        0 32px 64px rgba(0, 0, 0, 0.12),
        0 16px 32px rgba(0, 0, 0, 0.08),
        0 0 0 1px rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      position: relative;
      animation: modernModalIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }

    @keyframes modernModalIn {
      0% {
        opacity: 0;
        transform: scale(0.8) translateY(40px);
        filter: blur(10px);
      }
      100% {
        opacity: 1;
        transform: scale(1) translateY(0);
        filter: blur(0);
      }
    }

    #deleteAccountModal .modal::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
    }

    /* Modern Modal Elements */
    #deleteAccountModal .modal-title {
      background: linear-gradient(135deg, #dc2626, #ef4444);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 16px;
      text-align: center;
      letter-spacing: -0.02em;
      line-height: 1.2;
    }

    #deleteAccountModal .warning-message {
      background: linear-gradient(135deg, rgba(254, 242, 242, 0.8), rgba(252, 165, 165, 0.1));
      backdrop-filter: blur(10px);
      border: 1px solid rgba(252, 165, 165, 0.3);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 32px;
      box-shadow: 
        0 8px 32px rgba(220, 38, 38, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }

    #deleteAccountModal .warning-message::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, #dc2626, #ef4444, #dc2626);
    }

    #deleteAccountModal .warning-message p {
      margin: 0;
      color: #7f1d1d;
      font-size: 16px;
      line-height: 1.6;
      font-weight: 500;
    }

    #deleteAccountModal .warning-message p:first-child {
      font-weight: 700;
      margin-bottom: 12px;
      font-size: 18px;
      color: #991b1b;
    }

    #deleteAccountModal .form-group {
      margin-bottom: 28px;
      position: relative;
    }

    #deleteAccountModal .form-group label {
      display: block;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 12px;
      font-size: 16px;
      letter-spacing: -0.01em;
    }

    #deleteAccountModal .form-input {
      width: 100%;
      padding: 16px 20px;
      border: 2px solid rgba(209, 213, 219, 0.5);
      border-radius: 12px;
      font-size: 16px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      font-weight: 500;
      color: #1f2937;
    }

    #deleteAccountModal .form-input:focus {
      outline: none;
      border-color: #dc2626;
      box-shadow: 
        0 0 0 4px rgba(220, 38, 38, 0.1),
        0 4px 12px rgba(220, 38, 38, 0.15);
      background: rgba(255, 255, 255, 0.95);
      transform: translateY(-1px);
    }

    #deleteAccountModal .form-input::placeholder {
      color: #9ca3af;
      font-weight: 400;
    }

    #deleteAccountModal .input-container {
      position: relative;
    }

    #deleteAccountModal .password-toggle {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      font-size: 20px;
      color: #6b7280;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    #deleteAccountModal .password-toggle:hover {
      color: #dc2626;
      background: rgba(254, 242, 242, 0.8);
      transform: translateY(-50%) scale(1.1);
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.2);
    }

    #deleteAccountModal .checkbox-label {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      cursor: pointer;
      font-size: 16px;
      line-height: 1.6;
      color: #374151;
      padding: 20px;
      border-radius: 12px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: rgba(249, 250, 251, 0.5);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(229, 231, 235, 0.5);
      position: relative;
      overflow: hidden;
    }

    #deleteAccountModal .checkbox-label::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(220, 38, 38, 0.05), rgba(239, 68, 68, 0.05));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    #deleteAccountModal .checkbox-label:hover {
      background: rgba(254, 242, 242, 0.3);
      border-color: rgba(220, 38, 38, 0.2);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(220, 38, 38, 0.1);
    }

    #deleteAccountModal .checkbox-label:hover::before {
      opacity: 1;
    }

    #deleteAccountModal .checkbox-label input[type="checkbox"] {
      margin: 0;
      width: 20px;
      height: 20px;
      accent-color: #dc2626;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.3s ease;
    }

    #deleteAccountModal .modal-actions {
      display: flex;
      gap: 16px;
      margin-top: 40px;
      justify-content: flex-end;
      align-items: center;
    }

    #deleteAccountModal .btn-cancel {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(203, 213, 225, 0.3);
      color: #475569;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 16px 32px;
      border-radius: 12px;
      font-size: 15px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      min-width: 140px;
      position: relative;
      overflow: hidden;
    }

    #deleteAccountModal .btn-cancel::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      transition: left 0.5s ease;
    }

    #deleteAccountModal .btn-cancel:hover {
      background: rgba(226, 232, 240, 0.9);
      border-color: rgba(148, 163, 184, 0.5);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    #deleteAccountModal .btn-cancel:hover::before {
      left: 100%;
    }

    #deleteAccountModal .btn-delete {
      background: linear-gradient(135deg, #dc2626, #ef4444, #dc2626);
      background-size: 200% 200%;
      border: none;
      color: white;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 16px 32px;
      border-radius: 12px;
      font-size: 15px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      min-width: 160px;
      box-shadow: 
        0 8px 25px rgba(220, 38, 38, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }

    #deleteAccountModal .btn-delete::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), transparent);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    #deleteAccountModal .btn-delete:hover {
      background-position: 100% 0;
      transform: translateY(-2px);
      box-shadow: 
        0 12px 35px rgba(220, 38, 38, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    #deleteAccountModal .btn-delete:hover::before {
      opacity: 1;
    }

    #deleteAccountModal .btn-delete:active {
      transform: translateY(0);
      box-shadow: 
        0 4px 15px rgba(220, 38, 38, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    #deleteAccountModal .error-message {
      color: #dc2626;
      font-size: 14px;
      margin-top: 8px;
      font-weight: 500;
      padding: 8px 12px;
      background: rgba(254, 242, 242, 0.5);
      border-radius: 8px;
      border-left: 3px solid #dc2626;
    }

    #deleteAccountModal .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(229, 231, 235, 0.3);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      color: #6b7280;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 10;
    }

    #deleteAccountModal .modal-close:hover {
      background: rgba(254, 242, 242, 0.9);
      color: #dc2626;
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.2);
    }

    .success-message {
      text-align: center;
      padding: 20px;
      background: linear-gradient(135deg, #d1fae5, #a7f3d0);
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }

    .success-message.show {
      display: block;
    }

    .success-icon {
      font-size: 48px;
      margin-bottom: 15px;
    }

    .success-text {
      font-size: 18px;
      font-weight: 500;
      color: #065f46;
    }

    /* Payment Method Management Styles - Mobile App Design */
    .payment-modal-content {
      background: white;
      min-height: 100vh;
      padding: 0;
    }

    .payment-header {
      display: flex;
      align-items: center;
      padding: 20px 20px 10px 20px;
      border-bottom: 1px solid #f0f0f0;
      background: white;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .payment-back-btn {
      background: none;
      border: none;
      font-size: 20px;
      color: #333;
      cursor: pointer;
      padding: 8px;
      margin-right: 15px;
    }

    .payment-title {
      font-size: 18px;
      font-weight: 500;
      color: #1a1a1a;
      margin: 0;
    }

    .payment-sections {
      padding: 0 20px 20px 20px;
    }

    .payment-section {
      margin-bottom: 20px;
    }

    .payment-section-title {
      font-size: 14px;
      font-weight: 500;
      color: #1a1a1a;
      margin: 20px 0 15px 0;
    }

    .payment-methods-list {
      background: white;
      border-radius: 0;
      margin: 0;
    }

    .payment-method-item {
      display: flex;
      align-items: center;
      padding: 16px 0;
      border-bottom: 1px solid #f0f0f0;
      background: white;
      transition: background-color 0.2s ease;
      cursor: pointer;
    }

    .payment-method-item:last-child {
      border-bottom: none;
    }

    .payment-method-item:hover {
      background: #f8f9fa;
    }

    .payment-method-item:active {
      background: #e9ecef;
      transform: scale(0.98);
    }

    .payment-method-info {
      display: flex;
      align-items: center;
      flex: 1;
      gap: 12px;
    }

    .payment-method-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 500;
      color: white;
      flex-shrink: 0;
    }

    .payment-method-icon.visa {
      background: #1a1f71;
    }

    .payment-method-icon.mastercard {
      background: #eb001b;
    }

    .payment-method-icon.amex {
      background: #006fcf;
    }

    .payment-method-icon.touchngo {
      background: #0066cc;
      border-radius: 12px;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 4px;
    }

    .payment-method-icon.touchngo::before {
      content: 'Touch \'n GO';
      color: white;
      font-size: 8px;
      font-weight: bold;
      font-family: Arial, sans-serif;
      line-height: 1;
      margin-bottom: 2px;
      text-align: center;
    }

    .payment-method-icon.touchngo::after {
      content: 'eWallet';
      color: #ffd700;
      font-size: 6px;
      font-weight: bold;
      font-family: Arial, sans-serif;
      line-height: 1;
      text-align: center;
    }

    .payment-method-icon.touchngo .tng-ewallet {
      display: none;
    }

    .payment-method-icon.gx {
      background: #6b46c1;
    }

    .payment-method-icon.cards {
      background: #10b981;
    }

    .payment-method-icon.bank {
      background: #10b981;
    }

    .payment-method-icon.alipay {
      background: #1677ff;
    }

    .payment-method-icon.kakao {
      background: #ffc107;
    }

    /* Credit Card Icons */
    .payment-method-icon.visa {
      background: white;
      position: relative;
      border: 1px solid #e5e7eb;
    }

    .payment-method-icon.visa::after {
      content: 'VISA';
      font-family: 'Arial', sans-serif;
      font-size: 12px;
      font-weight: 900;
      color: #1a1f71;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      letter-spacing: 0.5px;
      font-style: italic;
    }

    .payment-method-icon.mastercard {
      background: linear-gradient(135deg, #eb001b, #f79e1b);
      position: relative;
    }

    .payment-method-icon.mastercard::after {
      content: 'MC';
      font-size: 10px;
      font-weight: 500;
      color: white;
    }

    .payment-method-icon.amex {
      background: linear-gradient(135deg, #006fcf, #00a8e6);
      position: relative;
    }

    .payment-method-icon.amex::after {
      content: 'AMEX';
      font-size: 8px;
      font-weight: 500;
      color: white;
    }

    .payment-method-details {
      flex: 1;
      min-width: 0;
    }

    .payment-method-category {
      font-size: 12px;
      color: #8e8e93;
      margin-bottom: 2px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .payment-method-name {
      font-size: 14px;
      font-weight: 400;
      color: #1a1a1a;
      margin: 0 0 2px 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .payment-method-subtitle {
      font-size: 14px;
      color: #8e8e93;
      margin: 0;
    }

    .payment-method-subtitle[onclick] {
      color: #1a1a1a;
      font-weight: 500;
      transition: color 0.2s ease;
    }

    .payment-method-subtitle[onclick]:hover {
      color: #0066cc;
    }

    .payment-method-badge {
      background: #f2f2f7;
      color: #8e8e93;
      padding: 2px 8px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 400;
    }

    .payment-method-chevron {
      color: #c7c7cc;
      font-size: 14px;
      margin-left: 8px;
    }

    .payment-method-actions {
      display: none; /* Hidden in mobile design */
    }

    .add-methods-list {
      background: white;
      border-radius: 0;
      margin: 0;
    }

    .add-method-item {
      display: flex;
      align-items: center;
      padding: 16px 0;
      border-bottom: 1px solid #f0f0f0;
      background: white;
      transition: background-color 0.2s ease;
      cursor: pointer;
    }

    .add-method-item:last-child {
      border-bottom: none;
    }

    .add-method-item:hover {
      background: #f8f9fa;
    }

    .add-method-info {
      display: flex;
      align-items: center;
      flex: 1;
      gap: 12px;
    }

    .add-method-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 500;
      color: white;
      flex-shrink: 0;
    }

    .add-method-icon.touchngo {
      background: #0066cc;
      border-radius: 8px;
      position: relative;
      overflow: hidden;
    }

    .add-method-icon.touchngo::before {
      content: 'Touch';
      position: absolute;
      top: 6px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 8px;
      font-weight: 500;
      color: white;
      font-style: italic;
    }

    .add-method-icon.touchngo::after {
      content: '\'n GO';
      position: absolute;
      top: 14px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 8px;
      font-weight: 500;
      color: white;
      font-style: italic;
    }

    .add-method-icon.touchngo .tng-ewallet {
      position: absolute;
      bottom: 4px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 6px;
      font-weight: 500;
      color: #ffd700;
      font-style: italic;
    }

    .add-method-icon.gx {
      background: #6b46c1;
    }

    .add-method-icon.cards {
      background: #10b981;
    }

    .add-method-icon.bank {
      background: #10b981;
    }

    .add-method-icon.alipay {
      background: #1677ff;
    }

    .add-method-icon.kakao {
      background: #ffc107;
    }

    .add-method-details {
      flex: 1;
      min-width: 0;
    }

    .add-method-name {
      font-size: 14px;
      font-weight: 400;
      color: #1a1a1a;
      margin: 0 0 2px 0;
    }

    .add-method-subtitle {
      font-size: 14px;
      color: #8e8e93;
      margin: 0;
    }

    .add-method-partner {
      font-size: 11px;
      color: #8e8e93;
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 2px;
    }

    .add-method-chevron {
      color: #c7c7cc;
      font-size: 14px;
      margin-left: 8px;
    }

    .btn-add-payment {
      display: none; /* Hidden in mobile design */
    }

    .payment-form {
      display: none;
      background: white;
      min-height: 100vh;
      padding: 0;
    }

    .payment-form.show {
      display: block;
    }

    .add-card-header {
      display: flex;
      align-items: center;
      padding: 20px 20px 10px 20px;
      border-bottom: 1px solid #f0f0f0;
      background: white;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .add-card-back-btn {
      background: none;
      border: none;
      font-size: 20px;
      color: #333;
      cursor: pointer;
      padding: 8px;
      margin-right: 15px;
    }

    .add-card-title {
      font-size: 18px;
      font-weight: 500;
      color: #1a1a1a;
      margin: 0;
    }

    .add-card-content {
      padding: 20px;
    }


    .add-card-form {
      background: white;
    }

    .form-field-group {
      margin-bottom: 20px;
    }

    .form-field-label {
      display: flex;
      align-items: center;
      font-size: 14px;
      font-weight: 500;
      color: #333;
      margin-bottom: 6px;
    }

    .form-field-label .info-icon {
      margin-left: 5px;
      font-size: 12px;
      color: #999;
      cursor: help;
    }

    .form-field-input {
      width: 100%;
      padding: 15px 16px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      background: white;
      transition: border-color 0.3s ease;
    }

    .form-field-input:focus {
      outline: none;
      border-color: #f08a24;
    }

    .form-field-input::placeholder {
      color: #999;
    }

    .form-field-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    .default-method-section {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 0;
      border-bottom: 1px solid #f0f0f0;
      margin-bottom: 20px;
    }

    .default-method-label {
      font-size: 14px;
      font-weight: 400;
      color: #333;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 30px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 30px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: #f08a24;
    }

    input:checked + .toggle-slider:before {
      transform: translateX(20px);
    }

    .security-info {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .security-text {
      font-size: 13px;
      color: #718096;
      line-height: 1.4;
      margin: 0 0 10px 0;
    }

    .security-text:last-child {
      margin-bottom: 0;
    }

    .terms-link {
      color: #f08a24;
      text-decoration: underline;
      cursor: pointer;
    }

    .continue-button {
      width: 100%;
      padding: 16px;
      background: #e0e0e0;
      color: #999;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: not-allowed;
      transition: all 0.3s ease;
    }

    .continue-button.active {
      background: #f08a24;
      color: white;
      cursor: pointer;
    }

    .continue-button.active:hover {
      background: #e67e22;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }

    .form-row.full {
      grid-template-columns: 1fr;
    }

    .card-preview {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      position: relative;
      overflow: hidden;
    }

    .card-preview::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    .card-preview-content {
      position: relative;
      z-index: 2;
    }

    .card-number {
      font-size: 18px;
      font-weight: 500;
      margin-bottom: 6px;
      letter-spacing: 2px;
    }

    .card-details {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .card-holder {
      font-size: 14px;
      opacity: 0.9;
    }

    .card-expiry {
      font-size: 14px;
      opacity: 0.9;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #718096;
    }

    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 15px;
      opacity: 0.5;
    }

    .empty-state h3 {
      margin: 0 0 10px 0;
      font-size: 18px;
      color: #333;
    }

    .empty-state p {
      margin: 0;
      font-size: 14px;
    }

    /* Responsive Modal */
    @media (max-width: 768px) {
      .modal {
        padding: 30px 20px;
        margin: 20px;
        width: calc(100% - 40px);
      }

      .modal-title {
        font-size: 24px;
      }

      .modal-actions {
        flex-direction: column;
      }

      .btn-modal {
        width: 100%;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .payment-method-item {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }

      .payment-method-actions {
        justify-content: center;
      }
    }


    /* Responsive Design */
    @media (max-width: 768px) {
      .main-container {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        padding: 20px;
        position: static;
        height: auto;
      }
      
      .main-content {
        padding: 20px;
      }
      
      .content-wrapper {
        flex-direction: column;
        gap: 20px;
      }
      
      .profile-summary {
        width: 100%;
        order: 2;
      }
      
      .right-panel {
        order: 1;
        border-radius: 16px;
      }
      
      .settings-header {
        padding: 30px 20px 20px 20px;
      }
      
      .settings-title {
        font-size: 28px;
      }
      
      .settings-subtitle {
        font-size: 14px;
      }
      
      .settings-content {
        padding: 20px;
        max-height: none;
      }
      
      .page-header {
        margin-bottom: 20px;
      }
      
      .setting-item {
        flex-direction: column;
        gap: 15px;
        text-align: center;
        padding: 15px;
      }

      
      .page-title {
        font-size: 28px;
      }
      
      .back-to-top {
        bottom: 20px;
        right: 20px;
        width: 45px;
        height: 45px;
      }
      
      .search-container {
        width: 250px;
      }
    }

    @media (max-width: 480px) {
      .header {
        padding: 0 15px;
      }
      
      .search-container {
        width: 200px;
      }
      
      .header-right {
        gap: 15px;
      }
      
      .sidebar, .main-content {
        padding: 15px;
      }
      
      .profile-summary, .right-panel {
        padding: 20px;
      }
      
      .settings-header {
        padding: 25px 15px 15px 15px;
      }
      
      .settings-title {
        font-size: 24px;
      }
      
      .settings-subtitle {
        font-size: 14px;
      }
      
      .settings-content {
        padding: 15px;
      }
      
      .page-title {
        font-size: 24px;
      }
      
      .setting-item {
        padding: 12px;
      }
      
      .back-to-top {
        bottom: 15px;
        right: 15px;
        width: 40px;
        height: 40px;
        font-size: 18px;
      }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <div class="header">
    <div class="logo">
      <span class="logo-dot"></span>
      <span>Amber</span>
    </div>
    <div class="search-container">
      <input type="text" class="search-input" placeholder="Search Yoga, Weaving, dance">
      <button class="search-button" type="submit">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
      </button>
    </div>
    <div class="header-right">
      <a href="notifications.html" class="header-item" onclick="showNotificationPageNotification(event)">
        <span>🔔</span>
        <span class="label">Notification</span>
      </a>
      <a href="my-profile.html" class="header-item" onclick="showProfileNotification(event)">
        <span>👤</span>
        <span class="label">Profile</span>
      </a>
    </div>
  </div>

  <div class="main-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="home.html" class="nav-link">
            <span>🏠</span>
            Home
          </a>
        </li>
        <li class="nav-item">
          <a href="activities.html" class="nav-link">
            <span>🎯</span>
            Activities
          </a>
        </li>
        <li class="nav-item">
          <a href="bookings.html" class="nav-link">
            <span>📅</span>
            Bookings
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" onclick="showCustomersNotification(event)">
            <span>👥</span>
            Customers
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link active">
            <span>⚙️</span>
            Settings
          </a>
        </li>
      </ul>

      <div class="promo-cards">
        <div class="promo-card">
          <h4>Weekend Retreat</h4>
          <p>Recharge with 2 days of yoga & breath work.</p>
          <button class="promo-btn">View Retreat</button>
        </div>
        <div class="promo-card">
          <h4>Weekend Retreat</h4>
          <p>Recharge with 2 days of yoga & breath work.</p>
          <button class="promo-btn">Claim Offer</button>
        </div>
        <div class="promo-card">
          <h4>Weekend Retreat</h4>
          <p>Recharge with 2 days of yoga & breath work.</p>
          <button class="promo-btn">See Schedule</button>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="content-wrapper">
        <!-- Left Panel - User Profile -->
        <div class="left-panel">
          <div class="profile-section">
            <div class="profile-avatar">
              <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iNDAiIGZpbGw9IiM0YTkwZTIiLz4KPGNpcmNsZSBjeD0iNDAiIGN5PSIzMCIgcj0iMTIiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMCA2MEMyMCA1MC4zMzU5IDI4LjMzNTkgNDIgMzggNDJINjJDNzEuNjY0MSA0MiA4MCA1MC4zMzU5IDgwIDYwVjgwSDIwVjYwWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+" alt="Profile" style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid white;">
            </div>
            <div class="profile-name">ubi</div>
            <div class="profile-email">ubi@email.com</div>
          </div>
          
          <ul class="left-nav-menu">
            <li class="left-nav-item">
              <a href="my-profile.html" class="left-nav-link">
                <svg class="left-nav-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
                My Profile
              </a>
            </li>
            <li class="left-nav-item">
              <a href="#" class="left-nav-link active">
                <svg class="left-nav-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                </svg>
                Settings
              </a>
            </li>
            <li class="left-nav-item">
              <a href="privacy-policy.html" class="left-nav-link">
                <svg class="left-nav-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.1 16,12.7V16.2C16,16.8 15.4,17.3 14.8,17.3H9.2C8.6,17.3 8,16.8 8,16.2V12.6C8,12.1 8.6,11.5 9.2,11.5V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,10V11.5H13.5V10C13.5,8.7 12.8,8.2 12,8.2Z"/>
                </svg>
                Privacy and Policy
              </a>
            </li>
            <li class="left-nav-item">
              <a href="terms-conditions.html" class="left-nav-link">
                <svg class="left-nav-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
                Terms and Conditions
              </a>
            </li>
            <li class="left-nav-item">
              <a href="#" class="left-nav-link">
                <svg class="left-nav-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                </svg>
                Log out
              </a>
            </li>
          </ul>
        </div>

        <!-- Right Panel - Settings -->
        <div class="right-panel">
          <div class="settings-header">
            <h2 class="settings-title">Settings</h2>
            <p class="settings-subtitle">Please set your settings in below:</p>
          </div>

          <div class="settings-content">
            <div class="settings-list">
            <!-- Notifications Setting -->
            <div class="setting-item">
              <div class="setting-left">
                <svg class="setting-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                </svg>
                <span class="setting-label">Notifications</span>
              </div>
              <div class="setting-control">
                <label class="toggle-switch">
                  <input type="checkbox" checked>
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <!-- Reset Password Setting -->
            <div class="setting-item">
              <div class="setting-left">
                <svg class="setting-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                </svg>
                <span class="setting-label">Reset Password</span>
              </div>
              <div class="setting-control">
                <button class="btn btn-reset">Reset</button>
              </div>
            </div>

            <!-- Manage Payment Method Setting -->
            <div class="setting-item">
              <div class="setting-left">
                <svg class="setting-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/>
                </svg>
                <span class="setting-label">Manage Payment Method</span>
              </div>
              <div class="setting-control">
                <button class="btn btn-manage">MANAGE</button>
              </div>
            </div>

            <!-- Delete Account Setting -->
            <div class="setting-item">
              <div class="setting-left">
                <svg class="setting-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                </svg>
                <span class="setting-label">Delete Account</span>
              </div>
              <div class="setting-control">
                <button class="btn btn-delete" id="deleteAccountBtn">DELETE</button>
              </div>
            </div>
            </div>
          </div>
        </div>

        <!-- Back to Top Button -->
        <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
          ↑
        </button>
      </div>
    </div>
  </div>

  <!-- Reset Password Modal -->
  <div class="modal-overlay" id="resetPasswordModal">
    <div class="modal">
      <button class="modal-close" id="closeModal">&times;</button>
      
      <div class="success-message" id="successMessage">
        <div class="success-icon">✅</div>
        <div class="success-text">Password reset successfully!</div>
      </div>

      <form id="resetPasswordForm">
        <div class="modal-header">
          <h2 class="modal-title">Reset Password</h2>
        </div>
        <div class="form-group">
          <p class="modal-subtitle">Enter your current password and choose a new secure password</p>
          <label for="currentPassword" class="form-label">Current Password</label>
          <div class="password-input-container">
            <input type="password" id="currentPassword" class="form-input" placeholder="Enter your current password" required>
            <button type="button" class="password-toggle" id="toggleCurrentPassword" onclick="togglePasswordVisibility('currentPassword', 'toggleCurrentPassword')">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
            </button>
          </div>
          <div class="error-message" id="currentPasswordError">Please enter your current password</div>
        </div>

        <div class="form-group">
          <label for="newPassword" class="form-label">New Password</label>
          <div class="password-input-container">
            <input type="password" id="newPassword" class="form-input" placeholder="Enter your new password" required>
            <button type="button" class="password-toggle" id="toggleNewPassword" onclick="togglePasswordVisibility('newPassword', 'toggleNewPassword')">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
            </button>
          </div>
          <div class="error-message" id="newPasswordError">Please enter a valid new password</div>
          
          <div class="password-requirements" id="passwordRequirements">
            <h4>Password Requirements:</h4>
            <ul>
              <li id="req-length">At least 8 characters long</li>
              <li id="req-uppercase">Contains at least one uppercase letter</li>
              <li id="req-lowercase">Contains at least one lowercase letter</li>
              <li id="req-number">Contains at least one number</li>
              <li id="req-special">Contains at least one special character</li>
            </ul>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword" class="form-label">Confirm New Password</label>
          <div class="password-input-container">
            <input type="password" id="confirmPassword" class="form-input" placeholder="Confirm your new password" required>
            <button type="button" class="password-toggle" id="toggleConfirmPassword" onclick="togglePasswordVisibility('confirmPassword', 'toggleConfirmPassword')">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
            </button>
          </div>
          <div class="error-message" id="confirmPasswordError">Passwords do not match</div>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn-modal btn-modal-secondary" id="cancelReset">Cancel</button>
          <button type="submit" class="btn-modal btn-modal-primary" id="submitReset">Reset Password</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Payment Method Management Modal -->
  <div class="modal-overlay" id="paymentMethodModal">
    <div class="modal payment-modal-content">
      <div class="payment-header">
        <button class="payment-back-btn" id="closePaymentModal">←</button>
        <h1 class="payment-title">All Payment Methods</h1>
      </div>

      <div class="payment-sections">
        <!-- Currently Linked Section -->
        <div class="payment-section">
          <h2 class="payment-section-title">Currently Linked</h2>
          <div class="payment-methods-list" id="paymentMethodsList">
            <!-- Payment methods will be dynamically loaded here -->
          </div>
        </div>

        <!-- Add Methods Section -->
        <div class="payment-section">
          <h2 class="payment-section-title">Add methods</h2>
          <div class="add-methods-list" id="addMethodsList">
            <div class="add-method-item" onclick="showAddPaymentForm('touchngo')">
              <div class="add-method-info">
                <div class="add-method-icon touchngo">
                  <span class="tng-ewallet">eWallet</span>
                </div>
                <div class="add-method-details">
                  <div class="add-method-name">Touch 'n Go</div>
                  <div class="add-method-subtitle">Earn up to 0.5x in Rewards</div>
                </div>
                <div class="add-method-chevron">›</div>
              </div>
            </div>

            <div class="add-method-item" onclick="showAddPaymentForm('gx')">
              <div class="add-method-info">
                <div class="add-method-icon gx">GX</div>
                <div class="add-method-details">
                  <div class="add-method-name">GX Account</div>
                  <div class="add-method-subtitle">Earn up to 0.5x in GrabRewards</div>
                </div>
                <div class="add-method-chevron">›</div>
              </div>
            </div>

            <div class="add-method-item" onclick="showAddPaymentForm('cards')">
              <div class="add-method-info">
                <div class="add-method-icon cards">💳</div>
                <div class="add-method-details">
                  <div class="add-method-name">Cards</div>
                </div>
                <div class="add-method-chevron">›</div>
              </div>
            </div>

            <div class="add-method-item" onclick="showAddPaymentForm('bank')">
              <div class="add-method-info">
                <div class="add-method-icon bank">🏦</div>
                <div class="add-method-details">
                  <div class="add-method-name">Bank account</div>
                </div>
                <div class="add-method-chevron">›</div>
              </div>
            </div>

            <div class="add-method-item" onclick="showAddPaymentForm('alipay')">
              <div class="add-method-info">
                <div class="add-method-icon alipay">之</div>
                <div class="add-method-details">
                  <div class="add-method-name">Alipay</div>
                </div>
                <div class="add-method-partner">
                  Alipay+ PARTNER <span style="color: #1677ff;">+</span>
                </div>
                <div class="add-method-chevron">›</div>
              </div>
            </div>

            <div class="add-method-item" onclick="showAddPaymentForm('alipayhk')">
              <div class="add-method-info">
                <div class="add-method-icon alipay">之</div>
                <div class="add-method-details">
                  <div class="add-method-name">AlipayHK</div>
                </div>
                <div class="add-method-partner">
                  Alipay+ PARTNER <span style="color: #1677ff;">+</span>
                </div>
                <div class="add-method-chevron">›</div>
              </div>
            </div>

            <div class="add-method-item" onclick="showAddPaymentForm('kakao')">
              <div class="add-method-info">
                <div class="add-method-icon kakao">pay</div>
                <div class="add-method-details">
                  <div class="add-method-name">Kakao Pay</div>
                </div>
                <div class="add-method-partner">
                  Alipay+ PARTNER <span style="color: #1677ff;">+</span>
                </div>
                <div class="add-method-chevron">›</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Add/Edit Payment Form (Hidden by default) -->
      <div class="payment-form" id="paymentForm">
        <div class="add-card-header">
          <button class="add-card-back-btn" id="addCardBackBtn">←</button>
          <h1 class="add-card-title" id="addCardTitle">Add Card</h1>
        </div>

        <div class="add-card-content">

          <!-- Add Card Form -->
          <div class="add-card-form">
            <form id="paymentMethodForm">
              <!-- Card Number Field -->
              <div class="form-field-group">
                <label for="cardNumber" class="form-field-label">
                  Card number
                  <span class="info-icon">ℹ️</span>
                </label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #999;">💳</span>
                  <input type="text" id="cardNumber" class="form-field-input" placeholder="Card number" maxlength="19" required style="padding-left: 45px;">
                </div>
                <div class="error-message" id="cardNumberError">Please enter a valid card number</div>
              </div>

              <!-- Expiry Date & CVV Row -->
              <div class="form-field-row">
                <div class="form-field-group">
                  <label for="expiryDate" class="form-field-label">Expiry date</label>
                  <input type="text" id="expiryDate" class="form-field-input" placeholder="MM / YY" maxlength="5" required>
                  <div class="error-message" id="expiryDateError">Please enter expiry date (MM/YY)</div>
                </div>
                <div class="form-field-group">
                  <label for="cvv" class="form-field-label">CVV</label>
                  <input type="text" id="cvv" class="form-field-input" placeholder="CVV" maxlength="4" required>
                  <div class="error-message" id="cvvError">Please enter CVV</div>
                </div>
              </div>

              <!-- Card Holder Field -->
              <div class="form-field-group">
                <label for="cardHolder" class="form-field-label">
                  Cardholder name
                  <span class="info-icon">ℹ️</span>
                </label>
                <input type="text" id="cardHolder" class="form-field-input" placeholder="Cardholder name" required>
                <div class="error-message" id="cardHolderError">Please enter cardholder name</div>
              </div>

              <!-- Billing Address Field -->
              <div class="form-field-group">
                <label for="billingAddress" class="form-field-label">
                  Billing address
                  <span class="info-icon">ℹ️</span>
                </label>
                <input type="text" id="billingAddress" class="form-field-input" placeholder="Billing address" required>
                <div class="error-message" id="billingAddressError">Please enter billing address</div>
              </div>

              <!-- Set as Default Method -->
              <div class="default-method-section">
                <span class="default-method-label">Set as default method</span>
                <label class="toggle-switch">
                  <input type="checkbox" id="setAsDefault">
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <!-- Security Information -->
              <div class="security-info">
                <p class="security-text">Your card details will be saved securely.</p>
                <p class="security-text">Your card may be charged to make sure it's valid. That amount will be automatically refunded. By adding a card, you have read and agree to our <span class="terms-link" onclick="showTerms()">terms and conditions</span>.</p>
              </div>

              <!-- Continue Button -->
              <button type="submit" class="continue-button" id="continueButton" disabled>Continue</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Payment Method Details Modal -->
  <div class="payment-details-modal" id="paymentDetailsModal">
    <div class="payment-details-container">
      <div class="details-header">
        <button class="details-back-btn" id="closeDetailsModal">←</button>
        <h1 class="details-title">Details</h1>
      </div>

      <div class="details-content">
        <!-- Card Display -->
        <div class="card-display">
          <div class="card-logo visa">
            <span class="visa-text">VISA</span>
          </div>
          <div class="card-info">
            <div class="card-type">Visa</div>
            <div class="card-number" id="detailsCardNumber">**8666</div>
          </div>
        </div>

        <!-- Card Details -->
        <div class="card-details">
          <div class="detail-row">
            <span class="detail-label">Expiry date</span>
            <span class="detail-value" id="detailsExpiryDate">12/2028</span>
          </div>
          
          <div class="detail-row">
            <span class="detail-label">Set as default</span>
            <label class="toggle-switch">
              <input type="checkbox" id="detailsSetAsDefault">
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="detail-row delete-row" onclick="deletePaymentMethod()">
            <span class="detail-label delete-text">Delete</span>
          </div>
        </div>

        <!-- Footer Info -->
        <div class="details-footer">
          <p class="footer-text">
            Depending on your bank, releasing each transaction can take up to 30 days. 
            <span class="learn-more-link">Learn more.</span>
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Delete Account Validation Modal -->
  <div class="modal-overlay" id="deleteAccountModal">
    <div class="modal">
      <button class="modal-close" id="closeDeleteModal">&times;</button>
      
      <div class="modal-body">
        <h2 class="modal-title">⚠️ Delete Account</h2>
        
        <div class="warning-message">
          <p><strong>This action cannot be undone!</strong></p>
          <p>To delete your account, please verify your information below:</p>
        </div>
        
        <form id="deleteAccountForm">
          <div class="form-group">
            <label for="deleteEmail">Email Address *</label>
            <div class="input-container">
              <input type="email" id="deleteEmail" class="form-input" placeholder="Enter your email address" required>
            </div>
            <div class="error-message" id="deleteEmailError"></div>
          </div>
          
          <div class="form-group">
            <label for="deletePassword">Current Password *</label>
            <div class="input-container">
              <input type="password" id="deletePassword" class="form-input" placeholder="Enter your current password" required>
              <span class="password-toggle" id="toggleDeletePassword" onclick="togglePasswordVisibility('deletePassword', 'toggleDeletePassword')">👁️</span>
            </div>
            <div class="error-message" id="deletePasswordError"></div>
          </div>
          
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="deleteConfirmation" required>
              <span class="checkmark"></span>
              I understand that this action is permanent and cannot be undone
            </label>
            <div class="error-message" id="deleteConfirmationError"></div>
          </div>
          
          <div class="modal-actions">
            <button type="button" class="btn btn-cancel" id="cancelDeleteBtn">CANCEL</button>
            <button type="button" class="btn btn-delete" id="confirmDeleteBtn">DELETE ACCOUNT</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    function showNotification(message, type) {
      // Notification function disabled - no notifications will be shown
      return;
    }

    // Settings Functions
    function toggleNotifications() {
      const toggle = document.querySelector('.toggle-switch input');
      const isEnabled = toggle.checked;
      showNotification(
        isEnabled ? "🔔 Notifications enabled!" : "🔕 Notifications disabled!", 
        "success"
      );
    }

    function resetPassword() {
      // Open the reset password modal
      const modal = document.getElementById('resetPasswordModal');
      if (modal) {
        modal.classList.add('show');
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
      }
    }

    function closeResetPasswordModal() {
      const modal = document.getElementById('resetPasswordModal');
      if (modal) {
        modal.classList.remove('show');
        document.body.style.overflow = 'auto'; // Restore scrolling
        resetForm();
      }
    }

    function resetForm() {
      // Reset form fields
      document.getElementById('currentPassword').value = '';
      document.getElementById('newPassword').value = '';
      document.getElementById('confirmPassword').value = '';
      
      // Reset password fields to hidden state
      const passwordInputs = ['currentPassword', 'newPassword', 'confirmPassword'];
      passwordInputs.forEach(inputId => {
        const input = document.getElementById(inputId);
        if (input) {
          input.type = 'password';
        }
      });
      
      // Reset toggle buttons to default state
      const toggleButtons = ['toggleCurrentPassword', 'toggleNewPassword', 'toggleConfirmPassword'];
      toggleButtons.forEach(buttonId => {
        const button = document.getElementById(buttonId);
        if (button) {
          button.classList.remove('active');
          button.innerHTML = `
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
            </svg>
          `;
        }
      });
      
      // Clear error states
      clearAllErrors();
      
      // Hide success message
      const successMessage = document.getElementById('successMessage');
      if (successMessage) {
        successMessage.classList.remove('show');
      }
      
      // Reset password requirements
      updatePasswordRequirements('');
    }

    function clearAllErrors() {
      const errorMessages = document.querySelectorAll('.error-message');
      const errorInputs = document.querySelectorAll('.form-input.error');
      
      errorMessages.forEach(msg => msg.classList.remove('show'));
      errorInputs.forEach(input => input.classList.remove('error'));
    }

    function showError(inputId, messageId, message) {
      const input = document.getElementById(inputId);
      const errorMsg = document.getElementById(messageId);
      
      if (input && errorMsg) {
        input.classList.add('error');
        errorMsg.textContent = message;
        errorMsg.classList.add('show');
      }
    }

    function clearError(inputId, messageId) {
      const input = document.getElementById(inputId);
      const errorMsg = document.getElementById(messageId);
      
      if (input && errorMsg) {
        input.classList.remove('error');
        errorMsg.classList.remove('show');
      }
    }

    function validatePassword(password) {
      const requirements = {
        length: password.length >= 8,
        uppercase: /[A-Z]/.test(password),
        lowercase: /[a-z]/.test(password),
        number: /\d/.test(password),
        special: /[!@#$%^&*(),.?":{}|<>]/.test(password)
      };
      
      return requirements;
    }

    function updatePasswordRequirements(password) {
      const requirements = validatePassword(password);
      
      // Update each requirement indicator
      Object.keys(requirements).forEach((req, index) => {
        const element = document.getElementById(`req-${req}`);
        if (element) {
          if (requirements[req]) {
            element.classList.remove('invalid');
            element.classList.add('valid');
          } else {
            element.classList.remove('valid');
            element.classList.add('invalid');
          }
        }
      });
    }

    function validateForm() {
      const currentPassword = document.getElementById('currentPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      let isValid = true;
      
      // Clear previous errors
      clearAllErrors();
      
      // Validate current password
      if (!currentPassword.trim()) {
        showError('currentPassword', 'currentPasswordError', 'Please enter your current password');
        isValid = false;
      }
      
      // Validate new password
      if (!newPassword.trim()) {
        showError('newPassword', 'newPasswordError', 'Please enter a new password');
        isValid = false;
      } else {
        const requirements = validatePassword(newPassword);
        const allRequirementsMet = Object.values(requirements).every(req => req);
        
        if (!allRequirementsMet) {
          showError('newPassword', 'newPasswordError', 'Password does not meet all requirements');
          isValid = false;
        }
      }
      
      // Validate password confirmation
      if (!confirmPassword.trim()) {
        showError('confirmPassword', 'confirmPasswordError', 'Please confirm your new password');
        isValid = false;
      } else if (newPassword !== confirmPassword) {
        showError('confirmPassword', 'confirmPasswordError', 'Passwords do not match');
        isValid = false;
      }
      
      // Check if new password is different from current password
      if (currentPassword && newPassword && currentPassword === newPassword) {
        showError('newPassword', 'newPasswordError', 'New password must be different from current password');
        isValid = false;
      }
      
      return isValid;
    }

    function handlePasswordReset(event) {
      event.preventDefault();
      
      if (!validateForm()) {
        return;
      }
      
      // Simulate password reset process
      const submitBtn = document.getElementById('submitReset');
      const originalText = submitBtn.textContent;
      
      // Show loading state
      submitBtn.disabled = true;
      submitBtn.textContent = 'Resetting...';
      
      // Simulate API call
      setTimeout(() => {
        // Show success message
        const successMessage = document.getElementById('successMessage');
        const form = document.getElementById('resetPasswordForm');
        
        if (successMessage && form) {
          form.style.display = 'none';
          successMessage.classList.add('show');
          
          // Auto close modal after 3 seconds
          setTimeout(() => {
            closeResetPasswordModal();
            showNotification("🔐 Password reset successfully!", "success");
          }, 3000);
        }
        
        // Reset button state
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }, 2000);
    }

    function togglePasswordVisibility(inputId, buttonId) {
      const input = document.getElementById(inputId);
      const button = document.getElementById(buttonId);
      
      if (input && button) {
        const isPassword = input.type === 'password';
        
        // Toggle input type
        input.type = isPassword ? 'text' : 'password';
        
        // Toggle button state and icon
        if (isPassword) {
          // Show password - change to eye-off icon
          button.classList.add('active');
          button.innerHTML = `
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/>
            </svg>
          `;
        } else {
          // Hide password - change to eye icon
          button.classList.remove('active');
          button.innerHTML = `
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
            </svg>
          `;
        }
      }
    }

    function managePaymentMethod() {
      // Open the payment method management modal
      const modal = document.getElementById('paymentMethodModal');
      if (modal) {
        modal.classList.add('show');
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
        loadPaymentMethods();
      }
    }

    function closePaymentMethodModal() {
      const modal = document.getElementById('paymentMethodModal');
      if (modal) {
        modal.classList.remove('show');
        document.body.style.overflow = 'auto'; // Restore scrolling
        hidePaymentForm();
      }
    }

    // Payment Methods Data (in real app, this would come from API)
    let paymentMethods = [
      {
        id: 1,
        cardNumber: 'Touch \'n Go',
        cardType: 'touchngo',
        cardHolder: 'John Doe',
        expiryDate: '',
        isDefault: true,
        category: '',
        subtitle: 'Balance • RM0.15',
        phoneNumber: '60123456789',
        showPhoneNumber: false
      },
      {
        id: 2,
        cardNumber: '**8666',
        cardType: 'visa',
        cardHolder: 'John Doe',
        expiryDate: '12/2028',
        isDefault: false,
        category: '',
        subtitle: ''
      }
    ];

    let editingPaymentId = null;

    // Function to mask phone number
    function maskPhoneNumber(phoneNumber) {
      if (!phoneNumber) return '';
      const cleaned = phoneNumber.replace(/\D/g, '');
      if (cleaned.length < 10) return phoneNumber;
      
      const start = cleaned.substring(0, 3);
      const end = cleaned.substring(cleaned.length - 2);
      const middle = '*'.repeat(cleaned.length - 5);
      
      return `${start}${middle}${end}`;
    }

    // Function to toggle phone number visibility
    function togglePhoneNumberVisibility(paymentId) {
      const payment = paymentMethods.find(p => p.id === paymentId);
      if (payment && payment.cardType === 'touchngo') {
        payment.showPhoneNumber = !payment.showPhoneNumber;
        loadPaymentMethods(); // Refresh the display
      }
    }

    function loadPaymentMethods() {
      const listContainer = document.getElementById('paymentMethodsList');
      
      if (paymentMethods.length === 0) {
        listContainer.innerHTML = '<div style="text-align: center; padding: 40px; color: #8e8e93;">No payment methods linked</div>';
        return;
      }
      
      listContainer.innerHTML = paymentMethods.map(payment => `
            <div class="payment-method-item" data-id="${payment.id}" onclick="editPaymentMethod(${payment.id})">
              <div class="payment-method-info">
                <div class="payment-method-icon ${payment.cardType}">
                  ${payment.cardType === 'touchngo' ? '<span class="tng-ewallet">eWallet</span>' : getCardIcon(payment.cardType)}
                </div>
            <div class="payment-method-details">
              ${payment.category ? `<div class="payment-method-category">👥 ${payment.category}</div>` : ''}
              <div class="payment-method-name">
                ${payment.cardNumber}
                ${payment.isDefault ? '<span class="payment-method-badge">Default</span>' : ''}
              </div>
              ${payment.cardType === 'touchngo' && payment.phoneNumber ? 
                `<div class="payment-method-subtitle" onclick="event.stopPropagation(); togglePhoneNumberVisibility(${payment.id})" style="cursor: pointer;">
                  TNG eWallet: ${payment.showPhoneNumber ? payment.phoneNumber : maskPhoneNumber(payment.phoneNumber)}
                </div>` : 
                (payment.subtitle ? `<div class="payment-method-subtitle">${payment.subtitle}</div>` : '')
              }
            </div>
            <div class="payment-method-chevron">›</div>
          </div>
        </div>
      `).join('');
    }

    function getCardIcon(cardType) {
      const icons = {
        visa: '', // Will be handled by CSS ::after
        mastercard: '', // Will be handled by CSS ::after
        amex: '', // Will be handled by CSS ::after
        touchngo: 'TNG',
        gx: 'GX',
        cards: '💳',
        bank: '🏦',
        alipay: '之',
        kakao: 'pay',
        default: '💳'
      };
      return icons[cardType] || icons.default;
    }

    function showAddPaymentForm(type = 'cards') {
      const form = document.getElementById('paymentForm');
      const formTitle = document.getElementById('addCardTitle');
      const sections = document.querySelector('.payment-sections');
      
      editingPaymentId = null;
      formTitle.textContent = 'Add Card';
      form.classList.add('show');
      sections.style.display = 'none';
      
      // Reset form
      document.getElementById('paymentMethodForm').reset();
      updateContinueButton();
    }


    function updateContinueButton() {
      const cardNumber = document.getElementById('cardNumber').value;
      const expiryDate = document.getElementById('expiryDate').value;
      const cvv = document.getElementById('cvv').value;
      const cardHolder = document.getElementById('cardHolder').value;
      const billingAddress = document.getElementById('billingAddress').value;
      const continueBtn = document.getElementById('continueButton');
      
      const isFormValid = cardNumber.trim() && expiryDate.trim() && cvv.trim() && cardHolder.trim() && billingAddress.trim();
      
      if (isFormValid) {
        continueBtn.classList.add('active');
        continueBtn.disabled = false;
      } else {
        continueBtn.classList.remove('active');
        continueBtn.disabled = true;
      }
    }

    function showTerms() {
      showNotification("📄 Opening Terms and Conditions...", "info");
      // Here you can add actual terms and conditions page
    }

    function hidePaymentForm() {
      const form = document.getElementById('paymentForm');
      const sections = document.querySelector('.payment-sections');
      
      form.classList.remove('show');
      sections.style.display = 'block';
      editingPaymentId = null;
    }

    function editPaymentMethod(id) {
      const payment = paymentMethods.find(p => p.id === id);
      if (!payment) return;

      editingPaymentId = id;
      showPaymentDetails(payment);
    }

    function showPaymentDetails(payment) {
      const modal = document.getElementById('paymentDetailsModal');
      
      // Update card logo and type based on card type
      const cardLogo = document.querySelector('.card-logo');
      const cardType = document.querySelector('.card-type');
      const visaText = document.querySelector('.visa-text');
      
      // Remove all existing classes
      cardLogo.className = 'card-logo';
      
      // Set card type specific styling
      if (payment.cardType === 'visa') {
        cardLogo.classList.add('visa');
        cardType.textContent = 'Visa';
        visaText.textContent = 'VISA';
      } else if (payment.cardType === 'mastercard') {
        cardLogo.classList.add('mastercard');
        cardType.textContent = 'Mastercard';
        visaText.textContent = 'MC';
      } else if (payment.cardType === 'amex') {
        cardLogo.classList.add('amex');
        cardType.textContent = 'American Express';
        visaText.textContent = 'AMEX';
      } else if (payment.cardType === 'touchngo') {
        cardLogo.classList.add('touchngo');
        cardType.textContent = 'Touch \'n Go';
        visaText.innerHTML = 'Touch \'n GO<br><span style="color: #ffd700; font-size: 10px; font-weight: bold;">eWallet</span>';
      } else {
        cardLogo.classList.add('visa'); // Default to visa
        cardType.textContent = 'Card';
        visaText.textContent = 'CARD';
      }
      
      // Populate details
      document.getElementById('detailsCardNumber').textContent = payment.cardNumber;
      document.getElementById('detailsExpiryDate').textContent = payment.expiryDate;
      document.getElementById('detailsSetAsDefault').checked = payment.isDefault;
      
      // Set editing payment ID
      editingPaymentId = payment.id;
      
      // Show modal
      modal.classList.add('show');
    }

    function setAsDefault(id) {
      paymentMethods.forEach(payment => {
        payment.isDefault = payment.id === id;
      });
      loadPaymentMethods();
      showNotification("✅ Default payment method updated!", "success");
    }

    function closePaymentDetailsModal() {
      const modal = document.getElementById('paymentDetailsModal');
      modal.classList.remove('show');
      editingPaymentId = null;
      
      // Return to payment methods list
      const paymentModal = document.getElementById('paymentMethodModal');
      if (paymentModal) {
        paymentModal.classList.add('show');
      }
    }

    function updateDefaultStatus() {
      if (editingPaymentId) {
        const isDefault = document.getElementById('detailsSetAsDefault').checked;
        
        // Update the payment method
        const payment = paymentMethods.find(p => p.id === editingPaymentId);
        if (payment) {
          payment.isDefault = isDefault;
          
          // If setting as default, unset others
          if (isDefault) {
            paymentMethods.forEach(p => {
              if (p.id !== editingPaymentId) p.isDefault = false;
            });
          }
          
          loadPaymentMethods();
          showNotification("✅ Default payment method updated!", "success");
        }
      }
    }

    function deletePaymentMethod() {
      if (editingPaymentId && confirm("Are you sure you want to delete this payment method?")) {
        const index = paymentMethods.findIndex(p => p.id === editingPaymentId);
        if (index !== -1) {
          paymentMethods.splice(index, 1);
          loadPaymentMethods();
          closePaymentDetailsModal();
          showNotification("✅ Payment method deleted!", "success");
        }
      }
    }

    function updateCardPreview() {
      const cardNumber = document.getElementById('cardNumber').value || '**** **** **** ****';
      const cardHolder = document.getElementById('cardHolder').value || 'CARD HOLDER';
      const expiryDate = document.getElementById('expiryDate').value || 'MM/YY';
      
      document.getElementById('previewCardNumber').textContent = formatCardNumber(cardNumber);
      document.getElementById('previewCardHolder').textContent = cardHolder.toUpperCase();
      document.getElementById('previewCardExpiry').textContent = expiryDate;
    }

    function formatCardNumber(number) {
      // Remove all non-digits
      const cleaned = number.replace(/\D/g, '');
      // Add spaces every 4 digits
      const formatted = cleaned.replace(/(\d{4})(?=\d)/g, '$1 ');
      // Show only last 4 digits, mask the rest
      if (formatted.length > 4) {
        const last4 = formatted.slice(-4);
        const masked = '*'.repeat(formatted.length - 4).replace(/(.{4})/g, '$1 ');
        return masked + last4;
      }
      return formatted;
    }

    function validatePaymentForm() {
      const cardNumber = document.getElementById('cardNumber').value;
      const cardHolder = document.getElementById('cardHolder').value;
      const expiryDate = document.getElementById('expiryDate').value;
      const cvv = document.getElementById('cvv').value;
      const billingAddress = document.getElementById('billingAddress').value;

      console.log('Validating form:', { cardNumber, cardHolder, expiryDate, cvv, billingAddress });
      let isValid = true;
      clearAllPaymentErrors();

      // Validate card number
      if (!cardNumber || cardNumber.replace(/\D/g, '').length < 13) {
        showPaymentError('cardNumber', 'cardNumberError', 'Please enter a valid card number');
        isValid = false;
      }

      // Validate cardholder name
      if (!cardHolder.trim()) {
        showPaymentError('cardHolder', 'cardHolderError', 'Please enter cardholder name');
        isValid = false;
      }

      // Validate expiry date
      if (!expiryDate || !/^\d{2}\/\d{2}$/.test(expiryDate)) {
        showPaymentError('expiryDate', 'expiryDateError', 'Please enter expiry date (MM/YY)');
        isValid = false;
      }

      // Validate CVV
      if (!cvv || cvv.length < 3) {
        showPaymentError('cvv', 'cvvError', 'Please enter a valid CVV');
        isValid = false;
      }

      // Validate billing address
      if (!billingAddress.trim()) {
        showPaymentError('billingAddress', 'billingAddressError', 'Please enter billing address');
        isValid = false;
      }

      return isValid;
    }

    function showPaymentError(inputId, messageId, message) {
      const input = document.getElementById(inputId);
      const errorMsg = document.getElementById(messageId);
      
      if (input && errorMsg) {
        input.classList.add('error');
        errorMsg.textContent = message;
        errorMsg.classList.add('show');
      }
    }

    function clearAllPaymentErrors() {
      const errorMessages = document.querySelectorAll('#paymentMethodForm .error-message');
      const errorInputs = document.querySelectorAll('#paymentMethodForm .form-input.error');
      
      errorMessages.forEach(msg => msg.classList.remove('show'));
      errorInputs.forEach(input => input.classList.remove('error'));
    }

    function clearPaymentError(inputId, messageId) {
      const input = document.getElementById(inputId);
      const errorMsg = document.getElementById(messageId);
      
      if (input && errorMsg) {
        input.classList.remove('error');
        errorMsg.classList.remove('show');
      }
    }

    function handlePaymentFormSubmit(event) {
      event.preventDefault();
      console.log('Form submission triggered');
      
      if (!validatePaymentForm()) {
        console.log('Form validation failed');
        return;
      }
      
      console.log('Form validation passed, processing...');

      const formData = {
        cardNumber: document.getElementById('cardNumber').value,
        cardHolder: document.getElementById('cardHolder').value,
        expiryDate: document.getElementById('expiryDate').value,
        cvv: document.getElementById('cvv').value,
        billingAddress: document.getElementById('billingAddress').value,
        isDefault: document.getElementById('setAsDefault').checked
      };

      if (editingPaymentId) {
        // Update existing payment method
        const index = paymentMethods.findIndex(p => p.id === editingPaymentId);
        if (index !== -1) {
          paymentMethods[index] = {
            ...paymentMethods[index],
            cardNumber: '**' + formData.cardNumber.slice(-4),
            cardHolder: formData.cardHolder,
            expiryDate: formData.expiryDate,
            billingAddress: formData.billingAddress,
            isDefault: formData.isDefault
          };
          
          // If setting as default, unset others
          if (formData.isDefault) {
            paymentMethods.forEach((p, i) => {
              if (i !== index) p.isDefault = false;
            });
          }
        }
        showNotification("✅ Payment method updated!", "success");
      } else {
        // Add new payment method
        const newPayment = {
          id: Date.now(), // Simple ID generation
          cardNumber: '**' + formData.cardNumber.slice(-4),
          cardType: 'visa', // Default card type for display
          cardHolder: formData.cardHolder,
          expiryDate: formData.expiryDate,
          billingAddress: formData.billingAddress,
          isDefault: formData.isDefault,
          category: '',
          subtitle: ''
        };

        // If setting as default, unset others
        if (formData.isDefault) {
          paymentMethods.forEach(p => p.isDefault = false);
        }

        paymentMethods.push(newPayment);
        showNotification("✅ Card added successfully!", "success");
        
        // Show the details modal for the newly added card
        setTimeout(() => {
          showPaymentDetails(newPayment);
        }, 500); // Small delay to ensure the form is hidden and payment list is updated
      }

      loadPaymentMethods();
      hidePaymentForm();
    }

    function deleteAccount() {
      console.log('Delete account button clicked!'); // Debug log
      
      // Close any other open modals first
      const resetModal = document.getElementById('resetPasswordModal');
      if (resetModal) {
        resetModal.classList.remove('show');
        document.body.style.overflow = 'auto'; // Restore scrolling
      }
      
      // Show the validation modal
      const modal = document.getElementById('deleteAccountModal');
      if (modal) {
        console.log('Modal found, showing...'); // Debug log
        modal.classList.add('show');
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
      } else {
        console.error('Modal not found!'); // Debug log
      }
      
      // Clear any previous errors and form data
      clearDeleteFormErrors();
      clearDeleteForm();
      
      // Don't pre-fill any data - user must enter everything manually
      // This ensures they know their information and prevents accidental deletion
    }

    function getCurrentUserData() {
      // Get user data from localStorage or make API call
      // This is a placeholder - replace with actual data source
      return {
        fullName: 'ubi', // From profile section
        email: 'ubi@email.com', // From profile section
        phone: '+1234567890', // You may need to add this to profile
        password: 'stored_password_hash' // This should be hashed
      };
    }

    function validateDeleteAccount() {
      const email = document.getElementById('deleteEmail').value.trim();
      const password = document.getElementById('deletePassword').value;
      const confirmation = document.getElementById('deleteConfirmation').checked;

      let isValid = true;
      const currentUser = getCurrentUserData();

      // Clear previous errors
      clearDeleteFormErrors();

      // Validate email - must be exact match
      if (!email) {
        showDeleteError('deleteEmailError', 'Email address is required');
        isValid = false;
      } else if (!isValidEmail(email)) {
        showDeleteError('deleteEmailError', 'Please enter a valid email address');
        isValid = false;
      } else if (email.toLowerCase() !== currentUser.email.toLowerCase()) {
        showDeleteError('deleteEmailError', 'Email address does not match your account. Please enter your exact email address as it appears in your profile.');
        isValid = false;
      }

      // Validate password - must be correct
      if (!password) {
        showDeleteError('deletePasswordError', 'Current password is required');
        isValid = false;
      } else if (!validatePassword(password, currentUser.password)) {
        showDeleteError('deletePasswordError', 'Password is incorrect. Please enter your current password.');
        isValid = false;
      }

      // Validate confirmation - must be checked
      if (!confirmation) {
        showDeleteError('deleteConfirmationError', 'You must confirm that you understand this action is permanent and cannot be undone');
        isValid = false;
      }

      return isValid;
    }

    function isValidEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    function isValidPhone(phone) {
      const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;
      return phoneRegex.test(phone.replace(/\s/g, ''));
    }

    function validatePassword(inputPassword, storedPassword) {
      // In a real application, you would hash the input password and compare with stored hash
      // For demo purposes, we'll do a simple comparison
      return inputPassword === storedPassword;
    }

    function showDeleteError(errorId, message) {
      const errorElement = document.getElementById(errorId);
      errorElement.textContent = message;
      errorElement.classList.add('show');
      
      // Also highlight the input field
      const inputId = errorId.replace('Error', '');
      const inputElement = document.getElementById(inputId);
      if (inputElement) {
        inputElement.classList.add('error');
      }
    }

    function clearDeleteFormErrors() {
      const errorElements = document.querySelectorAll('#deleteAccountForm .error-message');
      errorElements.forEach(element => {
        element.classList.remove('show');
        element.textContent = '';
      });

      const inputElements = document.querySelectorAll('#deleteAccountForm .form-input');
      inputElements.forEach(element => {
        element.classList.remove('error');
      });
    }

    function clearDeleteForm() {
      // Clear all form fields
      document.getElementById('deleteEmail').value = '';
      document.getElementById('deletePassword').value = '';
      document.getElementById('deleteConfirmation').checked = false;
    }

    function confirmDeleteAccount() {
      // First validate all fields
      if (!validateDeleteAccount()) {
        showNotification("❌ Please fill in all information correctly before proceeding.", "error");
        return;
      }

      // Additional security check - verify all information one more time
      const email = document.getElementById('deleteEmail').value.trim();
      const password = document.getElementById('deletePassword').value;
      const confirmation = document.getElementById('deleteConfirmation').checked;

      // Double-check that all required fields are filled
      if (!email || !password || !confirmation) {
        showNotification("❌ All fields must be completed before deletion.", "error");
        return;
      }

      // Show final confirmation with user's information
      const confirmMessage = `🚨 FINAL CONFIRMATION: You are about to permanently delete the account for:
      
Email: ${email}

This action CANNOT be undone and will permanently delete ALL your data.

Are you absolutely certain you want to proceed?`;

      if (confirm(confirmMessage)) {
        // One more confirmation
        if (confirm("⚠️ LAST CHANCE: This is your final opportunity to cancel. Click OK to permanently delete your account.")) {
          // Close modal
          const modal = document.getElementById('deleteAccountModal');
          modal.classList.remove('show');
          document.body.style.overflow = 'auto'; // Restore scrolling
          
          // Show success message
          showNotification("🗑️ Account deletion initiated. You will receive a confirmation email.", "success");
          
          // Here you would typically make an API call to delete the account
          // deleteUserAccount();
          
          // For demo purposes, we'll just show a message
          setTimeout(() => {
            alert("Account deletion process completed. In a real application, this would delete your account from the server.");
          }, 2000);
        }
      }
    }

    function cancelDeleteAccount() {
      const modal = document.getElementById('deleteAccountModal');
      modal.classList.remove('show');
      document.body.style.overflow = 'auto'; // Restore scrolling
      clearDeleteFormErrors();
    }

    function updateProfile() {
      showNotification("✅ Profile updated successfully!", "success");
      // Here you can add form validation and AJAX request to save profile data
    }

    // Back to top functionality
    function scrollToTop() {
      const settingsContent = document.querySelector('.settings-content');
      if (settingsContent) {
        settingsContent.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      }
    }

    // Show/hide back to top button based on scroll position
    function toggleBackToTop() {
      const backToTop = document.getElementById('backToTop');
      const settingsContent = document.querySelector('.settings-content');
      
      if (backToTop && settingsContent) {
        if (settingsContent.scrollTop > 300) {
          backToTop.classList.add('show');
        } else {
          backToTop.classList.remove('show');
        }
      }
    }


    // Navigation Functions
    function navigateToMyProfile() {
      console.log('navigateToMyProfile called');
      setTimeout(() => {
        try {
          window.location.href = 'my-profile.html';
        } catch (error) {
          console.error('Error navigating to My Profile:', error);
        }
      }, 500);
    }

    function navigateToSettings() {
      console.log('navigateToSettings called');
      showNotification("⚙️ You are already on the Settings page!", "info");
      // Refresh profile data to ensure it's up-to-date
      loadAndSyncProfileData();
    }

    function showCustomersNotification(event) {
      event.preventDefault();
      showNotification("👥 Customers page coming soon!", "info");
    }

    function showNotificationPageNotification(event) {
      showNotification("🔔 Redirecting to notifications...", "info");
      // Let the default link behavior happen
    }

    function showProfileNotification(event) {
      showNotification("👤 Redirecting to your profile...", "info");
      // Let the default link behavior happen
    }

    function navigateToPrivacyPolicy() {
      console.log('navigateToPrivacyPolicy called');
      setTimeout(() => {
        try {
          window.location.href = 'privacy-policy.html';
        } catch (error) {
          console.error('Error navigating to Privacy Policy:', error);
        }
      }, 500);
    }

    function navigateToTerms() {
      console.log('navigateToTerms called');
      showNotification("📄 Redirecting to Terms and Conditions...", "info");
      setTimeout(() => {
        try {
          window.location.href = 'terms-conditions.html';
        } catch (error) {
          console.error('Error navigating to Terms and Conditions:', error);
          showNotification("❌ Error navigating to Terms and Conditions page", "error");
        }
      }, 500);
    }

    function logout() {
      console.log('logout called');
      if (confirm("🚪 Are you sure you want to log out?")) {
        showNotification("👋 Logging out... Goodbye!", "success");
        setTimeout(() => {
          showNotification("✅ Successfully logged out!", "success");
          // Clear any saved login data
          localStorage.removeItem("email");
          localStorage.removeItem("password");
          localStorage.removeItem("userProfile");
          localStorage.removeItem("userProfilePhoto");
          // Redirect to login page
          window.location.href = 'login.html';
        }, 1000);
      }
    }

    // Retreat Card Functions
    function viewRetreat() {
      showNotification("🏖️ Opening retreat details...", "info");
      // Here you can add actual retreat viewing logic
    }

    function claimOffer() {
      showNotification("🎁 Processing your retreat offer claim...", "info");
      setTimeout(() => {
        showNotification("🎉 Offer claimed successfully! Check your email for details.", "success");
      }, 1500);
    }

    function seeSchedule() {
      showNotification("📅 Opening retreat schedule...", "info");
      // Here you can add actual schedule viewing logic
    }


    // Load and sync profile data from My Profile page
    function loadAndSyncProfileData() {
      // Load saved profile data from localStorage
      const savedProfile = localStorage.getItem('userProfile');
      if (savedProfile) {
        try {
          const profileData = JSON.parse(savedProfile);
          
          // Update profile name in left panel
          const profileName = document.querySelector('.profile-name');
          if (profileName && profileData.fullName) {
            profileName.textContent = profileData.fullName;
          }

          // Update profile email in left panel
          const profileEmail = document.querySelector('.profile-email');
          if (profileEmail && profileData.email) {
            profileEmail.textContent = profileData.email;
          }

          // Update profile avatar initials
          const profileAvatar = document.querySelector('.profile-avatar');
          if (profileAvatar && profileData.fullName) {
            const initials = getInitials(profileData.fullName);
            profileAvatar.textContent = initials;
            // Only show initials if no background image is set
            if (!profileAvatar.style.backgroundImage || profileAvatar.style.backgroundImage === 'none') {
              profileAvatar.style.color = 'white';
            }
          }
        } catch (error) {
          console.error('Error loading profile data:', error);
        }
      }

      // Load saved profile photo
      const savedPhoto = localStorage.getItem('userProfilePhoto');
      if (savedPhoto) {
        const profileAvatar = document.querySelector('.profile-avatar');
        
        if (profileAvatar) {
          profileAvatar.style.backgroundImage = `url(${savedPhoto})`;
          profileAvatar.style.backgroundSize = 'cover';
          profileAvatar.style.backgroundPosition = 'center';
          profileAvatar.style.color = 'transparent';
        }
      }
    }

    // Helper function to get initials from full name
    function getInitials(fullName) {
      return fullName
        .split(' ')
        .map(name => name.charAt(0).toUpperCase())
        .join('')
        .substring(0, 2);
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      // Load and sync profile data from My Profile page
      loadAndSyncProfileData();

      // Set up periodic refresh to keep profile data synchronized
      // This ensures the Settings page always shows the latest profile information
      setInterval(loadAndSyncProfileData, 5000); // Refresh every 5 seconds

      // Setup back to top button functionality
      const settingsContent = document.querySelector('.settings-content');
      if (settingsContent) {
        settingsContent.addEventListener('scroll', toggleBackToTop);
      }

      // Settings buttons
      const toggleSwitch = document.querySelector('.toggle-switch input');
      if (toggleSwitch) {
        toggleSwitch.addEventListener('change', toggleNotifications);
      }

      const resetBtn = document.querySelector('.btn-reset');
      if (resetBtn) {
        resetBtn.addEventListener('click', resetPassword);
      }

      // Reset Password Modal Event Listeners
      const modal = document.getElementById('resetPasswordModal');
      const closeModalBtn = document.getElementById('closeModal');
      const cancelBtn = document.getElementById('cancelReset');
      const resetForm = document.getElementById('resetPasswordForm');
      const newPasswordInput = document.getElementById('newPassword');

      // Close modal events
      if (closeModalBtn) {
        closeModalBtn.addEventListener('click', closeResetPasswordModal);
      }

      if (cancelBtn) {
        cancelBtn.addEventListener('click', closeResetPasswordModal);
      }

      // Close modal when clicking outside
      if (modal) {
        modal.addEventListener('click', function(e) {
          if (e.target === modal) {
            closeResetPasswordModal();
          }
        });
      }

      // Form submission
      if (resetForm) {
        resetForm.addEventListener('submit', handlePasswordReset);
      }

      // Real-time password validation
      if (newPasswordInput) {
        newPasswordInput.addEventListener('input', function() {
          updatePasswordRequirements(this.value);
          clearError('newPassword', 'newPasswordError');
        });
      }

      // Clear errors on input focus
      const formInputs = document.querySelectorAll('.form-input');
      formInputs.forEach(input => {
        input.addEventListener('focus', function() {
          const inputId = this.id;
          const errorId = inputId + 'Error';
          clearError(inputId, errorId);
        });
      });

      const manageBtn = document.querySelector('.btn-manage');
      if (manageBtn) {
        manageBtn.addEventListener('click', managePaymentMethod);
      }

      // Payment Method Modal Event Listeners
      const paymentModal = document.getElementById('paymentMethodModal');
      const closePaymentModalBtn = document.getElementById('closePaymentModal');
      const addCardBackBtn = document.getElementById('addCardBackBtn');
      const paymentForm = document.getElementById('paymentMethodForm');

      // Close payment modal events
      if (closePaymentModalBtn) {
        closePaymentModalBtn.addEventListener('click', closePaymentMethodModal);
      }

      if (addCardBackBtn) {
        addCardBackBtn.addEventListener('click', hidePaymentForm);
      }

      // Close modal when clicking outside
      if (paymentModal) {
        paymentModal.addEventListener('click', function(e) {
          if (e.target === paymentModal) {
            closePaymentMethodModal();
          }
        });
      }

      // Payment Details Modal Event Listeners
      const detailsModal = document.getElementById('paymentDetailsModal');
      const closeDetailsModalBtn = document.getElementById('closeDetailsModal');
      const detailsSetAsDefault = document.getElementById('detailsSetAsDefault');

      // Close details modal events
      if (closeDetailsModalBtn) {
        closeDetailsModalBtn.addEventListener('click', closePaymentDetailsModal);
      }

      // Close modal when clicking outside
      if (detailsModal) {
        detailsModal.addEventListener('click', function(e) {
          if (e.target === detailsModal) {
            closePaymentDetailsModal();
          }
        });
      }

      // Toggle default status
      if (detailsSetAsDefault) {
        detailsSetAsDefault.addEventListener('change', updateDefaultStatus);
      }

      // Payment form submission
      if (paymentForm) {
        paymentForm.addEventListener('submit', handlePaymentFormSubmit);
      }

      // Real-time card preview updates
      const cardInputs = ['cardNumber', 'cardHolder', 'expiryDate'];
      cardInputs.forEach(inputId => {
        const input = document.getElementById(inputId);
        if (input) {
          input.addEventListener('input', updateCardPreview);
        }
      });

      // Card number formatting
      const cardNumberInput = document.getElementById('cardNumber');
      if (cardNumberInput) {
        cardNumberInput.addEventListener('input', function(e) {
          let value = e.target.value.replace(/\D/g, '');
          value = value.replace(/(\d{4})(?=\d)/g, '$1 ');
          e.target.value = value;
        });
      }

      // Expiry date formatting
      const expiryInput = document.getElementById('expiryDate');
      if (expiryInput) {
        expiryInput.addEventListener('input', function(e) {
          let value = e.target.value.replace(/\D/g, '');
          if (value.length >= 2) {
            value = value.substring(0, 2) + '/' + value.substring(2, 4);
          }
          e.target.value = value;
        });
      }

      // CVV formatting (numbers only)
      const cvvInput = document.getElementById('cvv');
      if (cvvInput) {
        cvvInput.addEventListener('input', function(e) {
          e.target.value = e.target.value.replace(/\D/g, '');
        });
      }

      // Clear payment form errors on input focus
      const paymentFormInputs = document.querySelectorAll('#paymentMethodForm .form-field-input');
      paymentFormInputs.forEach(input => {
        input.addEventListener('focus', function() {
          const inputId = this.id;
          const errorId = inputId + 'Error';
          clearPaymentError(inputId, errorId);
        });

        // Update continue button on input change
        input.addEventListener('input', updateContinueButton);
      });

      const deleteBtn = document.getElementById('deleteAccountBtn');
      if (deleteBtn) {
        deleteBtn.addEventListener('click', deleteAccount);
      }

      // Delete account modal event listeners
      const closeDeleteModal = document.getElementById('closeDeleteModal');
      const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
      const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');

      if (closeDeleteModal) {
        closeDeleteModal.addEventListener('click', cancelDeleteAccount);
      }

      if (cancelDeleteBtn) {
        cancelDeleteBtn.addEventListener('click', cancelDeleteAccount);
      }

      if (confirmDeleteBtn) {
        confirmDeleteBtn.addEventListener('click', confirmDeleteAccount);
      }

      // Close modal when clicking outside
      const deleteModal = document.getElementById('deleteAccountModal');
      if (deleteModal) {
        deleteModal.addEventListener('click', function(event) {
          if (event.target === deleteModal) {
            cancelDeleteAccount();
          }
        });
      }

      // Left navigation links functionality
      const leftNavLinks = document.querySelectorAll('.left-nav-link');
      
      console.log('Found left nav links:', leftNavLinks.length);
      
      leftNavLinks.forEach((link, index) => {
        console.log(`Link ${index}:`, link.href, link.textContent.trim());
        
        link.addEventListener('click', function(e) {
          e.preventDefault();
          console.log(`Clicked link ${index}:`, link.textContent.trim());
          
          // Handle each link based on its href or position
          if (link.href.includes('my-profile.html') || link.textContent.trim() === 'My Profile') {
            console.log('Navigating to My Profile');
            navigateToMyProfile();
          } else if (link.href.includes('privacy-policy.html') || link.textContent.trim() === 'Privacy and Policy') {
            console.log('Navigating to Privacy Policy');
            navigateToPrivacyPolicy();
          } else if (link.href.includes('terms-conditions.html') || link.textContent.trim() === 'Terms and Conditions') {
            console.log('Navigating to Terms and Conditions');
            navigateToTerms();
          } else if (link.classList.contains('active') || link.textContent.trim() === 'Settings') {
            console.log('Settings clicked');
            navigateToSettings();
          } else if (index === leftNavLinks.length - 1 || link.textContent.trim() === 'Log out') {
            console.log('Logout clicked');
            logout();
          } else {
            console.log('Unknown link clicked:', link.textContent.trim());
            showNotification("🔗 Link clicked: " + link.textContent.trim(), "info");
          }
        });
        
        // Add visual feedback on hover
        link.addEventListener('mouseenter', function() {
          this.style.transform = 'translateX(5px)';
          this.style.transition = 'transform 0.2s ease';
        });
        
        link.addEventListener('mouseleave', function() {
          this.style.transform = 'translateX(0)';
        });
      });

      // Retreat card buttons
      const viewRetreatBtn = document.querySelector('.retreat-button:not(.ghost)');
      if (viewRetreatBtn) {
        viewRetreatBtn.addEventListener('click', viewRetreat);
      }

      const claimOfferBtn = document.querySelector('.retreat-button.ghost:first-of-type');
      if (claimOfferBtn) {
        claimOfferBtn.addEventListener('click', claimOffer);
      }

      const seeScheduleBtn = document.querySelector('.retreat-button.ghost:last-of-type');
      if (seeScheduleBtn) {
        seeScheduleBtn.addEventListener('click', seeSchedule);
      }

      // Profile picture click
      const profileAvatar = document.querySelector('.profile-avatar');
      if (profileAvatar) {
        profileAvatar.addEventListener('click', function() {
          showNotification("📷 Profile picture upload feature coming soon!", "info");
        });
      }

      // Header navigation
      const notificationHeader = document.querySelector('.header-item:first-of-type');
      if (notificationHeader) {
        notificationHeader.addEventListener('click', function(e) {
          e.preventDefault();
          showNotification("🔔 You have no new notifications!", "info");
        });
      }

      const profileHeader = document.querySelector('.header-item:last-of-type');
      if (profileHeader) {
        profileHeader.addEventListener('click', function(e) {
          e.preventDefault();
          showNotification("👤 Redirecting to profile...", "info");
        });
      }

      // Search functionality
      const searchInput = document.querySelector('.search-input');
      const searchButton = document.querySelector('.search-button');
      
      if (searchInput && searchButton) {
        const performSearch = () => {
          const query = searchInput.value.trim();
          if (query) {
            showNotification(`🔍 Searching for "${query}"...`, "info");
            // Here you can add actual search logic
          } else {
            showNotification("🔍 Please enter a search term!", "info");
          }
        };

        searchButton.addEventListener('click', performSearch);
        searchInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            performSearch();
          }
        });
      }
    });
  </script>

</body>
</html>